<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:body>
        <ui:composition>
            <nav class="navbar navbar-default">
                <div class="container-fluid">
                  <!-- Brand and toggle get grouped for better mobile display -->
                  <div class="navbar-header">
                        <h:form class="navbar-brand" rendered="#{ loginController.user.name == null}">
                            <h:link value="Home unregistered" outcome="#{link.to('login.xhtml')}"/>
                        </h:form>

                        <h:form class="navbar-brand" rendered="#{loginController.user.role.name.compareTo('registered') == 0}">
                            <h:link value="Home registered" outcome="#{link.to('home_registered.xhtml')}"/>
                        </h:form>
                      
                        <h:form class="navbar-brand" rendered="#{loginController.user.role.name.compareTo('administrator') == 0}">
                            <h:link value="Home admin" outcome="#{link.to('home_admin.xhtml')}"/>
                        </h:form>                    
                  </div>

                  <!-- Collect the nav links, forms, and other content for toggling -->
                  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <c:choose>
                            <c:when test="#{loginController.user.name == null}">
                                <li>
                                    <h:form class="navbar-brand">
                                        <h:link value="Register" outcome="#{link.to('register.xhtml')}"/>
                                    </h:form>
                                </li>
                                <li>
                                    <h:form class="navbar-brand">
                                        <h:link value="Reset password" outcome="#{link.to('reset_password.xhtml')}"/>
                                    </h:form>
                                </li>
                            </c:when>
                            <c:when test="#{ loginController.user.role.name.compareTo('registered')==0 }">
                                <li>
                                    <h:form class="navbar-brand">
                                        <h:link value="Tickets" outcome="#{link.to('tickets.xhtml')}"/>
                                    </h:form>
                                </li>
                                <li>
                                    <h:form class="navbar-brand">
                                        <h:link value="logout" outcome="#{loginController.user.logout()}"/>
                                    </h:form>
                                </li>
                            </c:when>
                            <c:when test="#{ loginController.user.role.name.compareTo('administrator')==0 }">
                                <li>
                                    <h:form class="navbar-brand">
                                        <h:link value="new festival" outcome="#{link.to('new_festival.xhtml')}"/>
                                    </h:form>
                                </li>
                                <li>
                                    <h:form class="navbar-brand">
                                        <h:link value="logout" outcome="#{loginController.user.logout()}"/>
                                    </h:form>
                                </li>
                            </c:when>
                        </c:choose>
                    </ul>
                  </div><!-- /.navbar-collapse -->
                </div><!-- /.container-fluid -->
              </nav>  
        </ui:composition>
    </h:body>
</html>

